# InjectKit - GitHub Template Boilerplate

A scalable Python project boilerplate using manual dependency injection with `injector`. It includes a structured layout with environment-based configuration, centralized logging, database access using SQLAlchemy, and support for Apache Airflow (locally via Docker and on production via MWAA).

---

## ğŸ“¦ Features

- Manual Dependency Injection using `injector`
- Modular separation: `core/`, `services/`, and `entrypoints/`
- Environment variable support via `.env`
- Unit-test friendly structure
- SQLAlchemy-based database module
- Centralized logging service with file/console output
- ğŸŒ€ Apache Airflow DAG integration (local & MWAA-compatible)

---

## ğŸ—‚ï¸ Project Structure

```
injectkit/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ logging_service.py
â”‚   â”‚   â””â”€â”€ database.py
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ greeting_service.py
â”‚   â”‚   â””â”€â”€ user_service.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ container.py
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ entrypoints/
â”‚   â”œâ”€â”€ cli.py            # Optional command-line entrypoint
â”‚   â””â”€â”€ main.py           # Main script entry
â”œâ”€â”€ tasks/
â”‚   â””â”€â”€ sample_task.py    # Can be used for cron jobs, workers, etc.
â”œâ”€â”€ airflow/
â”‚   â””â”€â”€ dags/
â”‚       â””â”€â”€ example_dag.py  # Airflow DAG using app logic
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_user_service.py
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ LICENSE
â”œâ”€â”€ requirements.txt / pyproject.toml
â””â”€â”€ README.md
```

---

## ğŸš€ Getting Started

### 1. Clone the repo

```bash
git clone https://github.com/your-username/injectkit.git
cd injectkit
```

### 2. Create a virtual environment

```bash
python -m venv venv
source venv/bin/activate  # or venv\Scripts\activate on Windows
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

### 4. Set up environment variables

Copy `.env.example` to `.env` and update values:

```dotenv
ENVIRONMENT=development
API_KEY=changeme
FEATURE_FLAG=true
LOG_LEVEL=debug
LOG_TO_FILE=false
LOG_FILE_PATH=app.log
DATABASE_URL=postgresql://user:pass@localhost:5432/db
```

### 5. Run the app

```bash
python -m entrypoints.main
```

---

## ğŸ§ª Running Tests

```bash
pytest
```

---

## ğŸŒ€ Airflow Support

### Local Airflow (Docker)

Add `airflow/docker-compose.yml` (not included here) and mount:

- `./airflow/dags`
- `./injectkit.zip` (zipped `app/` directory for imports)

Then run:
```bash
cd airflow
docker compose up -d
```

### MWAA (Production)

1. Upload `injectkit.zip` to your MWAA DAGs S3 bucket
2. Use `airflow/dags/example_dag.py`
3. Configure environment variables in MWAA console
4. Add dependencies to `requirements.txt`

---

## â• Extending

### Add a New Service

1. Create a new file in `app/services/`
2. Use `@inject` if it depends on other services
3. Register it in `app/container.py`

### Add a Shared Utility

1. Place it in `app/core/`
2. Wire it into the DI container

---

## ğŸ“š Dependencies

- `injector`
- `python-dotenv`
- `SQLAlchemy`
- `psycopg2-binary`
- `pytest`
- `apache-airflow`

Install them using:

```bash
pip install -r requirements.txt
```

---

## ğŸ“ License

MIT â€” free to use for personal or commercial projects.
